<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Plot ER model simulations — plot_er • BayesERtools</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Plot ER model simulations — plot_er"><meta name="description" content="Plot ER model simulations"><meta property="og:description" content="Plot ER model simulations"><meta property="og:image" content="https://genentech.github.io/BayesERtools/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">BayesERtools</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.2.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/overview_of_the_package.html">0. Overview of the package</a></li>
    <li><a class="dropdown-item" href="../articles/basic_workflow_bin.html">1. Basic workflow for ER with binary endpoint</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><a class="external-link nav-link" href="https://github.com/genentech/BayesERtools" aria-label="Github project page"><span class="fa fa-github fa-lg"></span></a></li>
<li class="nav-item"><a class="nav-link" href="../coverage.html" aria-label="Coverage"><span class="fa fa-layer-group"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Plot ER model simulations</h1>

      <div class="d-none name"><code>plot_er.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Plot ER model simulations</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">plot_er</span><span class="op">(</span><span class="va">x</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for class 'ersim_med_qi'</span></span>
<span><span class="fu">plot_er</span><span class="op">(</span></span>
<span>  <span class="va">x</span>,</span>
<span>  show_orig_data <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  show_coef_exp <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  show_caption <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  options_orig_data <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  options_coef_exp <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  options_caption <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for class 'ersim'</span></span>
<span><span class="fu">plot_er</span><span class="op">(</span></span>
<span>  <span class="va">x</span>,</span>
<span>  show_orig_data <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  show_coef_exp <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  show_caption <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  options_orig_data <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  options_coef_exp <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  options_caption <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  qi_width_sim <span class="op">=</span> <span class="fl">0.95</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for class 'ermod'</span></span>
<span><span class="fu">plot_er</span><span class="op">(</span></span>
<span>  <span class="va">x</span>,</span>
<span>  show_orig_data <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  show_coef_exp <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  show_caption <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  options_orig_data <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  options_coef_exp <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  options_caption <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  n_draws_sim <span class="op">=</span> <span class="kw">if</span> <span class="op">(</span><span class="va">marginal</span><span class="op">)</span> <span class="fl">200</span> <span class="kw">else</span> <span class="cn">NULL</span>,</span>
<span>  seed_sample_draws <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  marginal <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  exposure_range <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  num_exposures <span class="op">=</span> <span class="fl">51</span>,</span>
<span>  qi_width_sim <span class="op">=</span> <span class="fl">0.95</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-x">x<a class="anchor" aria-label="anchor" href="#arg-x"></a></dt>
<dd><p>an object of class <code>ermod</code>, <code>ersim</code>,<code>ersim_med_qi</code>,
or their subclasses</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>currently not used</p></dd>


<dt id="arg-show-orig-data">show_orig_data<a class="anchor" aria-label="anchor" href="#arg-show-orig-data"></a></dt>
<dd><p>logical, whether to show the data points in the
model development dataset. Default is <code>FALSE</code>. Only support plotting
with data that was used in the model development. If you want to use
other data, consider adding geom_point() to the plot manually.</p></dd>


<dt id="arg-show-coef-exp">show_coef_exp<a class="anchor" aria-label="anchor" href="#arg-show-coef-exp"></a></dt>
<dd><p>logical, whether to show the credible interval
of the exposure coefficient. Default is <code>FALSE</code>. This is only available
for linear and linear logistic regression models.</p></dd>


<dt id="arg-show-caption">show_caption<a class="anchor" aria-label="anchor" href="#arg-show-caption"></a></dt>
<dd><p>logical, whether to show the caption note for the plot.
Default is <code>FALSE</code>.</p></dd>


<dt id="arg-options-orig-data">options_orig_data<a class="anchor" aria-label="anchor" href="#arg-options-orig-data"></a></dt>
<dd><p>List of options for configuring how original data
is displayed. Possible options include:</p><ul><li><p><code>add_boxplot</code>: Logical, whether to add a boxplot of exposure values.
Default is <code>FALSE</code>.</p></li>
<li><p><code>boxplot_height</code>: Height of the boxplot relative to the main plot.
Default is <code>0.15</code>.</p></li>
<li><p><code>show_boxplot_y_title</code>: Logical, whether to show the y-axis title
for the boxplot. Default is <code>TRUE</code>.</p></li>
<li><p><code>var_group</code>: The column to use for grouping data for plotting.
If specified, observed data points and boxplot will be grouped
and colored by this column. Default is <code>NULL</code>.</p></li>
<li><p><code>n_bins</code>: Number of bins to use for observed probability
summary. Only relevant for binary models. Default is <code>4</code>.</p></li>
<li><p><code>qi_width</code>: Width of the quantile interval (confidence interval) for
the observed probability summary. Only relevant for binary models.
Default is <code>0.95</code>.</p></li>
</ul></dd>


<dt id="arg-options-coef-exp">options_coef_exp<a class="anchor" aria-label="anchor" href="#arg-options-coef-exp"></a></dt>
<dd><p>List of options for configuring how the exposure
coefficient credible interval is displayed. Possible options include:</p><ul><li><p><code>qi_width</code>: Width of the quantile interval (credible interval) for
the exposure coefficient. Default is <code>0.95</code>.</p></li>
<li><p><code>n_sigfig</code>: Number of significant figures to display. Default is <code>3</code>.</p></li>
<li><p><code>pos_x</code>: x-coordinate of the text label. If <code>NULL</code> (default), it is
set to the minimum value for the exposure variable.</p></li>
<li><p><code>pos_y</code>: y-coordinate of the text label. If <code>NULL</code> (default), it is
set to 0.9 for logistic regression models and the maximum value of the
response variable in the original data for linear regression models.</p></li>
<li><p><code>size</code>: Size of the text label. Default is <code>4</code>.</p></li>
</ul></dd>


<dt id="arg-options-caption">options_caption<a class="anchor" aria-label="anchor" href="#arg-options-caption"></a></dt>
<dd><p>List of options for configuring the caption note.
Possible options include:</p><ul><li><p><code>orig_data</code>: Logical, whether to show the caption note for the
observed data. Default is <code>FALSE</code>.</p></li>
<li><p><code>orig_data_summary</code>: Logical, whether to show the caption note for the
observed data summary. Default is <code>FALSE</code>.
Only relevant for binary models.</p></li>
<li><p><code>coef_exp</code>: Logical, whether to show the caption note for the
exposure coefficient credible interval. Default is <code>FALSE</code>.</p></li>
</ul></dd>


<dt id="arg-qi-width-sim">qi_width_sim<a class="anchor" aria-label="anchor" href="#arg-qi-width-sim"></a></dt>
<dd><p>Width of the quantile interval to summarize simulated
draws.</p></dd>


<dt id="arg-n-draws-sim">n_draws_sim<a class="anchor" aria-label="anchor" href="#arg-n-draws-sim"></a></dt>
<dd><p>Number of draws to simulate response for each exposure
value. Set to NULL to use all draws in the model object. Default is NULL
unless marginal is set to TRUE (in that case 200 by default to reduce
computation time).</p></dd>


<dt id="arg-seed-sample-draws">seed_sample_draws<a class="anchor" aria-label="anchor" href="#arg-seed-sample-draws"></a></dt>
<dd><p>Seed for sampling draws. Default is NULL.</p></dd>


<dt id="arg-marginal">marginal<a class="anchor" aria-label="anchor" href="#arg-marginal"></a></dt>
<dd><p>logical, whether to use marginal ER simulation. Default
to <code>FALSE</code>. Need to set to <code>TRUE</code> if the model has covariates for the
plot to work.</p></dd>


<dt id="arg-exposure-range">exposure_range<a class="anchor" aria-label="anchor" href="#arg-exposure-range"></a></dt>
<dd><p>Only relevant when the input x is an <code>ermod</code> object.
Range of exposure values to simulate. If NULL
(default), it is set to the range of the exposure variable in the original
data for model development.</p></dd>


<dt id="arg-num-exposures">num_exposures<a class="anchor" aria-label="anchor" href="#arg-num-exposures"></a></dt>
<dd><p>Only relevant as with <code>exposure_range</code>.
Number of exposure values to simulate.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A ggplot object</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>Plotting with <code>ermod</code> is done with some default values. If they are not
suitable, you can always perform the simulation manually and use
<code>plot_er()</code> on the simulated data.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">d_sim_binom_cov_hgly2</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">ermod_bin</span> <span class="op">&lt;-</span> <span class="fu"><a href="dev_ermod_bin.html">dev_ermod_bin</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  data <span class="op">=</span> <span class="va">d_sim_binom_cov_hgly2</span>,</span></span>
<span class="r-in"><span>  var_resp <span class="op">=</span> <span class="st">"AEFLAG"</span>,</span></span>
<span class="r-in"><span>  var_exposure <span class="op">=</span> <span class="st">"AUCss_1000"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">ersim_med_qi</span> <span class="op">&lt;-</span> <span class="fu"><a href="sim_er_new_exp.html">sim_er_curve</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">ermod_bin</span>,</span></span>
<span class="r-in"><span>  output_type <span class="op">=</span> <span class="st">"median_qi"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">plot_er</span><span class="op">(</span><span class="va">ersim_med_qi</span>, show_orig_data <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">+</span></span></span>
<span class="r-in"><span>  <span class="fu">xgxr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/xgxr/man/xgx_scale_x_log10.html" class="external-link">xgx_scale_x_log10</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="plot_er-1.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Kenta Yoshida, François Mercier.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

